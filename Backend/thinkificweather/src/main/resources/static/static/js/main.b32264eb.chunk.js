(this.webpackJsonpthinkificweather=this.webpackJsonpthinkificweather||[]).push([[0],{57:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a,r,s,c,i,o,l,d,u,b,j,h=n(1),p=n.n(h),m=n(32),O=n.n(m),v=(n(57),n(13)),x=n(14),f=n(16),g=n(15),y=n(7),w=n(10),N=n(26),k=n.n(N),C=n(29),S=n(25),T=n.n(S),P="GET_ERRORS",D="GET_WEATHER",E="SET_CURRENT_USER",_=n(33),z=function(e){e?T.a.defaults.headers.common.Authorization=e:delete T.a.defaults.headers.common.Authorization},L=function(){return function(e){localStorage.removeItem("jwtToken"),z(!1),e({type:E,payload:{}})}},M=n(0),R=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"logout",value:function(){this.props.logout(),window.location.href="/"}},{key:"render",value:function(){var e,t=this.props.security,n=t.validToken,a=t.user,r=Object(M.jsxs)("div",{className:"collapse navbar-collapse",id:"mobile-nav",children:[Object(M.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(w.b,{className:"nav-link",to:"/dashboard",children:"Dashboard"})})}),Object(M.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(w.b,{className:"nav-link",to:"/dashboard",children:a.fullName})}),Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(w.b,{className:"nav-link",to:"/logout",onClick:this.logout.bind(this),children:"Logout"})})]})]}),s=Object(M.jsx)("div",{className:"collapse navbar-collapse",id:"mobile-nav",children:Object(M.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(w.b,{className:"nav-link",to:"/register",children:"Sign Up"})}),Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(w.b,{className:"nav-link",to:"/login",children:"Login"})})]})});return e=n&&a?r:s,Object(M.jsx)("nav",{className:"navbar navbar-expand-sm bg-dark navbar-dark",children:Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(w.b,{className:"navbar-brand",to:"/",children:"Thinkific-Current Weather"}),e]})})}}]),n}(h.Component),U=Object(y.b)((function(e){return{security:e.security}}),{logout:L})(R),A=n(6),W=(n(81),n(23)),F=n(18),I=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).state={cityName:"",errors:{}},e.onChange=e.onChange.bind(Object(F.a)(e)),e.onSubmit=e.onSubmit.bind(Object(F.a)(e)),e}return Object(x.a)(n,[{key:"onChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault(),console.log("City search - "+this.state.cityName),console.log("CityName Length - "+this.state.cityName.length),null==this.state.cityName||this.state.cityName.length,this.props.getCurrentWeather(this.state.cityName)}},{key:"render",value:function(){return Object(M.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",style:{marginTop:"20px"},children:Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(M.jsxs)("form",{className:"d-flex",children:[Object(M.jsx)("input",{className:"form-control me-2",style:{width:"500px"},type:"search",placeholder:"Search Weather by City","aria-label":"Search",name:"cityName",value:this.state.cityName,onChange:this.onChange}),Object(M.jsx)("button",{className:"btn btn-outline-success",type:"submit",onClick:this.onSubmit,children:"Search"})]})})})})}}]),n}(h.Component),H=Object(y.b)((function(e){return{errors:e.errors}}),{getCurrentWeather:function(e){return function(){var t=Object(C.a)(k.a.mark((function t(n){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("axios calling for city weather - "+e),t.next=4,T.a.get("/api/weather/".concat(e));case 4:a=t.sent,n({type:D,payload:a.data}),n({type:P,payload:{}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:P,payload:t.t0.response.data}),n({type:D,payload:{}});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}})(I),X=n(4),V=n(5),B=V.a.div(a||(a=Object(X.a)(["\nflex-basis: 100%;\ndisplay: grid;\njustify-content: center;\nalign-items: center;\ngrid-template-columns: auto 1fr;\nmargin: 20px 0;\ngrid-gap: 30px;\n"]))),G=n(21),J=n(19),q=V.a.div(r||(r=Object(X.a)(["\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nfont-size: 70px;\ncolor: #000000;\n"]))),K=V.a.h4(s||(s=Object(X.a)(["\n  color: ",";\n  display: block;\n  font-weight: ",";\n  font-size: ",";\n  text-align: ",";\n  padding: 5px 0;\n  ","\n"])),(function(e){return e.color||"#000000"}),(function(e){return e.weight||"600"}),(function(e){return e.fontSize||"15px"}),(function(e){return e.align||"left"}),(function(e){return e.firstToUpperCase&&"\n  &:first-letter {\n    text-transform: uppercase;\n  }\n  "})),Q=V.a.h3(c||(c=Object(X.a)(["\n  display: block;\n  font-size: 50px;\n  font-weight: 400;\n  color: #000000;\n"]))),Y=V.a.div(i||(i=Object(X.a)(["\nflex-basis: 100%;\ndisplay: flex;\nflex-wrap: wrap;\npadding: 10px 0;\nmargin: 20px 0;\nbackground-color: rgba(0, 0, 0, 0.2);\nborder-radius: 10px;\nalign-self: flex-start;\n"]))),Z=V.a.div(o||(o=Object(X.a)(["\nflex-basis: calc(100% / 3);\npadding: 10px;\n"]))),$=V.a.span(l||(l=Object(X.a)(["\n  color: ",";\n  display: block;\n  font-size: ",";\n  text-align: ",";\n\n  ","\n"])),(function(e){return e.color||"#000000"}),(function(e){return e.fontSize||"12px"}),(function(e){return e.align||"left"}),(function(e){return e.firstToUpperCase&&"\n  &:first-letter {\n    text-transform: uppercase;\n  }\n  "})),ee=function(e){var t=e.getHours(),n=e.getMinutes(),a=t>=12?"PM":"AM";return t=(t%=12)||12,n=n<10?"0".concat(n):n,"".concat(t,":").concat(n," ").concat(a)},te=function(e){switch(e){case"Thunderstorm":return Object(M.jsx)(G.a,{icon:J.a});case"Drizzle":return Object(M.jsx)(G.a,{icon:J.c});case"Rain":return Object(M.jsx)(G.a,{icon:J.d});case"Snow":return Object(M.jsx)(G.a,{icon:J.h});case"Clear":return Object(M.jsx)(G.a,{icon:J.i});case"Clouds":return Object(M.jsx)(G.a,{icon:J.b});default:return Object(M.jsx)(G.a,{icon:J.g})}},ne=function(e){var t=e.weather;console.log(1e3*t.dt);var n=60*(new Date).getTimezoneOffset();console.log(n);var a=new Date(1e3*(t.dt+n+t.timezone)),r=new Date(1e3*(t.sunrise+n+t.timezone)),s=new Date(1e3*(t.sunset+n+t.timezone));return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(K,{children:ee(a)}),Object(M.jsxs)("h2",{children:[t.cityName,", ",t.countryCode]}),Object(M.jsxs)(B,{children:[Object(M.jsx)(q,{children:te(t.weatherMain)}),Object(M.jsxs)("div",{children:[Object(M.jsxs)(Q,{children:[Math.floor(t.temperature),"\xb0"]}),Object(M.jsxs)(K,{weight:"400",firstToUpperCase:!0,children:["Feels Like ",t.currentTemperatureFeelsLike,"\xb0, ",t.weatherMain,", ",t.weatherDescription]})]})]}),Object(M.jsxs)(Y,{children:[Object(M.jsxs)(Z,{children:[Object(M.jsxs)(K,{align:"center",weight:"400",children:[t.windSpeed,"mph"]}),Object(M.jsx)($,{align:"center",children:"Wind"})]}),Object(M.jsxs)(Z,{children:[Object(M.jsxs)(K,{align:"center",weight:"400",children:[1*t.visibility/1e3,"km"]}),Object(M.jsx)($,{align:"center",children:"Visibility"})]}),Object(M.jsxs)(Z,{children:[Object(M.jsxs)(K,{align:"center",weight:"400",children:[t.humidity,"%"]}),Object(M.jsx)($,{align:"center",children:"Humidity"})]}),Object(M.jsxs)(Z,{children:[Object(M.jsxs)(K,{align:"center",weight:"400",children:[t.pressure,"hPa"]}),Object(M.jsx)($,{align:"center",children:"Pressure"})]}),Object(M.jsxs)(Z,{children:[Object(M.jsx)(K,{align:"center",weight:"400",children:ee(r)}),Object(M.jsx)($,{align:"center",children:"Sunrise"})]}),Object(M.jsxs)(Z,{children:[Object(M.jsx)(K,{align:"center",weight:"400",children:ee(s)}),Object(M.jsx)($,{align:"center",children:"Sunset"})]})]})]})},ae=V.a.span(d||(d=Object(X.a)(["\n  display: block;\n  text-align: center;\n  color: #000000;\n  font-size: 40px;\n  margin-right: 10px;\n"]))),re=V.a.span(u||(u=Object(X.a)(["\ncolor: #000000;\nfont-size: 17px;\n"]))),se=Object(V.b)(b||(b=Object(X.a)(["\nto {\n  opacity: 1;\n      visibility: visible;\n      top: 0;\n}\n"]))),ce=V.a.div(j||(j=Object(X.a)(["\nmax-width: 600px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nmargin: 100px auto 0;\npadding: 20px;\nopacity: 0;\nvisibility: hidden;\nposition: relative;\nborder-radius: 10px;\ntop: 20px;\nbackground-color: rgba(0, 0, 0, 0.3);\nborder-radius: 10px;\nanimation: "," 0.5s 1.4s forwards;\n"])),se),ie=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).dashboardMessage=function(e,t){return Object(M.jsx)("div",{className:"container",children:Object(M.jsxs)(ce,{children:[Object(M.jsx)(ae,{children:Object(M.jsx)(G.a,{icon:t})}),Object(M.jsx)(re,{children:e})]})})},e.state={error:!1},e}return Object(x.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({error:!!e.errors.error_message})}},{key:"render",value:function(){var e,t=this.props.weather.weather,n=this.props.errors,a=this.dashboardMessage(n.error_message,J.e),r=this.dashboardMessage("Please enter a city name fron earth to get the current weather !",J.f);return e=n&&null!=n.error_message?a:t&&null!=t.cityName?Object(M.jsx)(ne,{weather:t}):r,Object(M.jsxs)("div",{children:[Object(M.jsx)(H,{}),e]})}}]),n}(h.Component),oe=Object(y.b)((function(e){return{weather:e.weather,errors:e.errors}}))(ie),le=n(22),de=n(51),ue={},be=n(20),je={user:{},validToken:!1},he={weather:[]},pe=Object(le.b)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(be.a)(Object(be.a)({},e),{},{weather:t.payload});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return t.payload;default:return e}},security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(be.a)(Object(be.a)({},e),{},{user:t.payload,validToken:!!t.payload});default:return e}}}),me={},Oe=[de.a],ve=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),xe=window.navigator.userAgent.includes("Chrome")&&ve?Object(le.d)(pe,me,Object(le.c)(le.a.apply(void 0,Oe),ve)):Object(le.d)(pe,me,Object(le.c)(le.a.apply(void 0,Oe))),fe=n(27),ge=n.n(fe),ye=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).state={username:"",fullName:"",password:"",confirmPassword:"",errors:{}},e.onChange=e.onChange.bind(Object(F.a)(e)),e.onSubmit=e.onSubmit.bind(Object(F.a)(e)),e}return Object(x.a)(n,[{key:"componentWillReceiveProps",value:function(e){e&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,fullName:this.state.fullName,password:this.state.password,confirmPassword:this.state.confirmPassword};this.props.createNewCustomer(t,this.props.history)}},{key:"render",value:function(){var e=this.state.errors;return Object(M.jsx)("div",{className:"register",children:Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(M.jsx)("h1",{className:"display-4 text-center",children:"Sign Up"}),Object(M.jsx)("p",{className:"lead text-center",children:"Create your Account"}),Object(M.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"text",className:ge()("form-control form-control-lg",{"is-invalid":e.fullName}),placeholder:"Full Name",name:"fullName",value:this.state.fullName,onChange:this.onChange}),e.fullName&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.fullName})]}),Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"email",className:ge()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"Email Address (Username)",name:"username",value:this.state.username,onChange:this.onChange}),e.username&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.username})]}),Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"password",className:ge()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"password",className:ge()("form-control form-control-lg",{"is-invalid":e.confirmPassword}),placeholder:"Confirm Password",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.onChange}),e.confirmPassword&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.confirmPassword})]}),Object(M.jsx)("input",{type:"submit",className:"btn btn-info btn-block mt-4"})]})]})})})})}}]),n}(h.Component),we=Object(y.b)((function(e){return{errors:e.errors,security:e.security}}),{createNewCustomer:function(e,t){return function(){var n=Object(C.a)(k.a.mark((function n(a){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.post("/api/customers/register",e);case 3:t.push("/login"),a({type:P,payload:{}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),a({type:P,payload:n.t0.response.data});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})(ye),Ne=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this)).state={username:"",password:"",errors:{}},e.onChange=e.onChange.bind(Object(F.a)(e)),e.onSubmit=e.onSubmit.bind(Object(F.a)(e)),e}return Object(x.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.security.validToken&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};this.props.customerLogin(t)}},{key:"render",value:function(){var e=this.state.errors;return Object(M.jsx)("div",{className:"login",children:Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsxs)("div",{className:"col-md-8 m-auto",children:[Object(M.jsx)("h1",{className:"display-4 text-center",children:"Log In"}),Object(M.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"email",className:ge()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"Email Address (Username)",name:"username",value:this.state.username,onChange:this.onChange}),e.username&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.username})]}),Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsx)("input",{type:"password",className:ge()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"Password",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&Object(M.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(M.jsx)("input",{type:"submit",className:"btn btn-info btn-block mt-4"})]})]})})})})}}]),n}(h.Component),ke=Object(y.b)((function(e){return{errors:e.errors,security:e.security}}),{customerLogin:function(e){return function(){var t=Object(C.a)(k.a.mark((function t(n){var a,r,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.post("/api/customers/login",e);case 3:a=t.sent,r=a.data.token,localStorage.setItem("jwtToken",r),z(r),s=Object(_.a)(r),n({type:E,payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:P,payload:t.t0.response.data});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}})(Ne),Ce=n(52),Se=Object(y.b)((function(e){return{security:e.security}}))((function(e){var t=e.component,n=e.security,a=Object(Ce.a)(e,["component","security"]);return Object(M.jsx)(A.b,Object(be.a)(Object(be.a)({},a),{},{render:function(e){return!0===n.validToken?Object(M.jsx)(t,Object(be.a)({},e)):Object(M.jsx)(A.a,{to:"/login"})}}))})),Te=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(M.jsx)("div",{className:"landingpage",children:Object(M.jsx)("div",{className:"light-overlay landing-inner text-dark",children:Object(M.jsx)("div",{className:"container",children:Object(M.jsx)("div",{className:"row",children:Object(M.jsxs)("div",{className:"col-ms-12 text-center",children:[Object(M.jsx)("h1",{className:"display-3 me-md-3",style:{marginTop:"50px"},children:"Thinkific Take Home Test"}),Object(M.jsx)("p",{className:"lead",style:{marginTop:"50px"},children:"Create your account to enjoy current weather information of any city in planet earth !!"}),Object(M.jsx)("hr",{}),Object(M.jsx)(w.b,{className:"btn btn-lg btn-primary mr-2",to:"/register",children:"Sign Up"}),Object(M.jsx)(w.b,{className:"btn btn-lg btn-secondary ms-2",to:"/login",children:"Login"})]})})})})})}}]),n}(h.Component),Pe=Object(y.b)((function(e){return{security:e.security}}))(Te),De=localStorage.jwtToken;if(De){z(De);var Ee=Object(_.a)(De);xe.dispatch({type:E,payload:Ee});var _e=Date.now()/1e3;Ee.exp<_e&&(xe.dispatch(L()),window.location.href="/")}var ze=function(){return Object(M.jsx)(y.a,{store:xe,children:Object(M.jsx)(w.a,{children:Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)(U,{}),Object(M.jsx)(A.b,{exact:!0,path:"/",component:Pe}),Object(M.jsx)(A.b,{exact:!0,path:"/register",component:we}),Object(M.jsx)(A.b,{exact:!0,path:"/login",component:ke}),Object(M.jsx)(A.d,{children:Object(M.jsx)(Se,{exact:!0,path:"/dashboard",component:oe})})]})})})},Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,85)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};O.a.render(Object(M.jsx)(p.a.StrictMode,{children:Object(M.jsx)(ze,{})}),document.getElementById("root")),Le()}},[[84,1,2]]]);
//# sourceMappingURL=main.b32264eb.chunk.js.map